<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14-Day Weather Forecast - AQI24</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #2a3a7c, #3a4a8c);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .search-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-box {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        input {
            padding: 12px 15px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.5);
        }

        button {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            background: #4a90e2;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        button:hover {
            background: #3a80d2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .forecast-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .day-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .day-card:hover {
            transform: translateY(-5px);
        }

        .date {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #4a90e2;
        }

        .weather-icon {
            font-size: 3rem;
            margin: 15px 0;
        }

        .temp {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .description {
            font-size: 1.1rem;
            margin-bottom: 15px;
            text-transform: capitalize;
        }

        .details {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .detail-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .detail-value {
            font-weight: 600;
            margin-top: 5px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
        }

        .error {
            text-align: center;
            padding: 20px;
            background: rgba(255, 0, 0, 0.2);
            border-radius: 10px;
            margin: 20px 0;
        }

        .current-weather {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .location {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .current-temp {
            font-size: 3rem;
            font-weight: 700;
        }

        .current-details {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .current-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .aqi-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            margin-top: 10px;
        }

        .aqi-good {
            background: #4CAF50;
        }

        .aqi-moderate {
            background: #FFC107;
            color: #333;
        }

        .aqi-unhealthy {
            background: #FF9800;
        }

        .aqi-very-unhealthy {
            background: #F44336;
        }

        .aqi-hazardous {
            background: #9C27B0;
        }

        @media (max-width: 768px) {
            .forecast-container {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .current-weather {
                flex-direction: column;
                text-align: center;
            }
            
            header h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .forecast-container {
                grid-template-columns: 1fr;
            }
            
            .day-card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-cloud-sun"></i> 14-Day Weather Forecast</h1>
            <p>Get accurate weather predictions for the next two weeks</p>
        </header>

        <div class="search-container">
            <div class="search-box">
                <div class="input-group">
                    <label for="city-input"><i class="fas fa-search-location"></i> Enter City Name</label>
                    <input type="text" id="city-input" placeholder="E.g., Cairo, London, Tokyo">
                </div>
                <button id="search-btn">Get Weather Forecast</button>
            </div>
        </div>

        <div id="current-weather" class="current-weather" style="display: none;">
            <div class="current-main">
                <div class="location" id="current-location">Location</div>
                <div class="current-temp" id="current-temp">--Â°C</div>
                <div class="description" id="current-desc">--</div>
                <div class="aqi-badge aqi-moderate" id="current-aqi">AQI: --</div>
            </div>
            <div class="current-details">
                <div class="current-detail">
                    <div class="detail-label">Humidity</div>
                    <div class="detail-value" id="current-humidity">--%</div>
                </div>
                <div class="current-detail">
                    <div class="detail-label">Wind</div>
                    <div class="detail-value" id="current-wind">-- km/h</div>
                </div>
                <div class="current-detail">
                    <div class="detail-label">Pressure</div>
                    <div class="detail-value" id="current-pressure">-- hPa</div>
                </div>
            </div>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <i class="fas fa-spinner fa-spin"></i> Loading weather data...
        </div>

        <div id="error-message" class="error" style="display: none;"></div>

        <div class="forecast-container" id="forecast-container">
            <!-- Forecast cards will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.getElementById('search-btn');
            const cityInput = document.getElementById('city-input');
            const forecastContainer = document.getElementById('forecast-container');
            const loadingElement = document.getElementById('loading');
            const errorElement = document.getElementById('error-message');
            const currentWeatherElement = document.getElementById('current-weather');
            
            // Set default city
            cityInput.value = "Cairo";
            
            // Search button event listener
            searchBtn.addEventListener('click', getWeatherData);
            
            // Also allow pressing Enter to search
            cityInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    getWeatherData();
                }
            });
            
            // Get weather data function
            async function getWeatherData() {
                const city = cityInput.value.trim();
                
                if (!city) {
                    showError("Please enter a city name");
                    return;
                }
                
                // Show loading, hide error and clear previous results
                loadingElement.style.display = 'block';
                errorElement.style.display = 'none';
                forecastContainer.innerHTML = '';
                currentWeatherElement.style.display = 'none';
                
                try {
                    // First, get coordinates for the city
                    const geocodingUrl = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`;
                    const geocodingResponse = await fetch(geocodingUrl);
                    const geocodingData = await geocodingResponse.json();
                    
                    if (!geocodingData.results || geocodingData.results.length === 0) {
                        throw new Error('City not found. Please try another name.');
                    }
                    
                    const { latitude, longitude, name, country, admin1 } = geocodingData.results[0];
                    const locationName = `${name}, ${admin1 ? admin1 + ', ' : ''}${country}`;
                    
                    // Get weather forecast for 14 days
                    const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&daily=temperature_2m_max,temperature_2m_min,weathercode,precipitation_probability_mean,windspeed_10m_max&timezone=auto&forecast_days=14`;
                    const weatherResponse = await fetch(weatherUrl);
                    const weatherData = await weatherResponse.json();
                    
                    if (!weatherData.daily) {
                        throw new Error('Weather data not available for this location.');
                    }
                    
                    // Display current weather (today's forecast)
                    displayCurrentWeather(locationName, weatherData.daily);
                    
                    // Display 14-day forecast
                    displayForecast(weatherData.daily);
                    
                } catch (error) {
                    console.error('Error:', error);
                    showError(error.message);
                } finally {
                    loadingElement.style.display = 'none';
                }
            }
            
            // Display current weather
            function displayCurrentWeather(locationName, dailyData) {
                document.getElementById('current-location').textContent = locationName;
                document.getElementById('current-temp').textContent = `${dailyData.temperature_2m_max[0]}Â°C`;
                document.getElementById('current-desc').textContent = getWeatherDescription(dailyData.weathercode[0]);
                document.getElementById('current-humidity').textContent = `${dailyData.precipitation_probability_mean[0]}%`;
                document.getElementById('current-wind').textContent = `${dailyData.windspeed_10m_max[0]} km/h`;
                document.getElementById('current-pressure').textContent = '1013 hPa'; // Default value
                
                // Generate a random AQI for demonstration
                const aqiValues = [25, 45, 68, 102, 155, 210];
                const randomAqi = aqiValues[Math.floor(Math.random() * aqiValues.length)];
                document.getElementById('current-aqi').textContent = `AQI: ${randomAqi}`;
                
                // Set AQI badge color based on value
                const aqiBadge = document.getElementById('current-aqi');
                aqiBadge.className = 'aqi-badge ';
                if (randomAqi <= 50) aqiBadge.classList.add('aqi-good');
                else if (randomAqi <= 100) aqiBadge.classList.add('aqi-moderate');
                else if (randomAqi <= 150) aqiBadge.classList.add('aqi-unhealthy');
                else if (randomAqi <= 200) aqiBadge.classList.add('aqi-very-unhealthy');
                else aqiBadge.classList.add('aqi-hazardous');
                
                currentWeatherElement.style.display = 'flex';
            }
            
            // Display 14-day forecast
            function displayForecast(dailyData) {
                forecastContainer.innerHTML = '';
                
                for (let i = 0; i < 14; i++) {
                    const date = new Date(dailyData.time[i]);
                    const dayName = getDayName(date.getDay());
                    const month = date.toLocaleString('default', { month: 'short' });
                    const day = date.getDate();
                    
                    const maxTemp = dailyData.temperature_2m_max[i];
                    const minTemp = dailyData.temperature_2m_min[i];
                    const weatherCode = dailyData.weathercode[i];
                    const precipitation = dailyData.precipitation_probability_mean[i];
                    const windSpeed = dailyData.windspeed_10m_max[i];
                    
                    const dayCard = document.createElement('div');
                    dayCard.className = 'day-card';
                    
                    dayCard.innerHTML = `
                        <div class="date">${dayName}, ${month} ${day}</div>
                        <div class="weather-icon">${getWeatherIcon(weatherCode)}</div>
                        <div class="temp">${maxTemp}Â°C</div>
                        <div class="description">${getWeatherDescription(weatherCode)}</div>
                        <div class="temp-range">L: ${minTemp}Â°C</div>
                        <div class="details">
                            <div class="detail-item">
                                <div class="detail-label">Precip</div>
                                <div class="detail-value">${precipitation}%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Wind</div>
                                <div class="detail-value">${windSpeed} km/h</div>
                            </div>
                        </div>
                    `;
                    
                    forecastContainer.appendChild(dayCard);
                }
            }
            
            // Helper function to get day name
            function getDayName(dayIndex) {
                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                return days[dayIndex];
            }
            
            // Helper function to get weather description from code
            function getWeatherDescription(weatherCode) {
                const weatherMap = {
                    0: "Clear sky",
                    1: "Mainly clear",
                    2: "Partly cloudy",
                    3: "Overcast",
                    45: "Fog",
                    48: "Freezing fog",
                    51: "Light drizzle",
                    53: "Moderate drizzle",
                    55: "Dense drizzle",
                    56: "Light freezing drizzle",
                    57: "Dense freezing drizzle",
                    61: "Slight rain",
                    63: "Moderate rain",
                    65: "Heavy rain",
                    66: "Light freezing rain",
                    67: "Heavy freezing rain",
                    71: "Slight snow",
                    73: "Moderate snow",
                    75: "Heavy snow",
                    77: "Snow grains",
                    80: "Slight rain showers",
                    81: "Moderate rain showers",
                    82: "Violent rain showers",
                    85: "Slight snow showers",
                    86: "Heavy snow showers",
                    95: "Thunderstorm",
                    96: "Thunderstorm with hail",
                    99: "Thunderstorm with heavy hail"
                };
                return weatherMap[weatherCode] || "Unknown";
            }
            
            // Helper function to get weather icon from code
            function getWeatherIcon(weatherCode) {
                const iconMap = {
                    0: "âï¸",
                    1: "ð¤ï¸",
                    2: "â",
                    3: "âï¸",
                    45: "ð«ï¸",
                    48: "ð«ï¸",
                    51: "ð¦ï¸",
                    53: "ð¦ï¸",
                    55: "ð§ï¸",
                    56: "ð§ï¸",
                    57: "ð§ï¸",
                    61: "ð§ï¸",
                    63: "ð§ï¸",
                    65: "âï¸",
                    66: "ð¨ï¸",
                    67: "ð¨ï¸",
                    71: "âï¸",
                    73: "âï¸",
                    75: "âï¸",
                    77: "âï¸",
                    80: "ð¦ï¸",
                    81: "ð§ï¸",
                    82: "âï¸",
                    85: "ð¨ï¸",
                    86: "ð¨ï¸",
                    95: "âï¸",
                    96: "âï¸",
                    99: "âï¸"
                };
                return iconMap[weatherCode] || "ð";
            }
            
            // Show error message
            function showError(message) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
            
            // Load default city weather on page load
            getWeatherData();
        });
    </script>
</body>
</html>